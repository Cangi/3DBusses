<html>
<head>
<script src="https://cdn-webgl.wrld3d.com/wrldjs/dist/latest/wrld.js"></script>
<script src="testRoute.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.1/leaflet.css" rel="stylesheet" />
<link rel="stylesheet" href="testcss.css">

</head>
<body>

	<div style="position: relative">
		<div id="map" style="height: 100%"></div>		
			<script>
			
			var map = L.Wrld.map("map", "c976700dbe05df6d18bdab38af2b1ae2", {center: [56.458522, -2.97107], zoom: 15});
				
				
			// create custom icon
    		var BusStop = L.Icon.extend({
    		options: {
        		iconSize:     [75, 75],
        		iconAnchor:   [32.5, 75],
        		popupAnchor:  [-3, -76]
    			}
			});

			var linkBusStop = 'https://cdn3.iconfinder.com/data/icons/transport-29/100/22-512.png'
			var linkBusStation = 'https://cdn2.iconfinder.com/data/icons/large-home-icons/512/Bus_station_transportation_space.png'

			var stop1 = new BusStop({iconUrl: linkBusStop});
			var stopBusStation = new BusStop({iconUrl: linkBusStation});
    
    		L.icon = function (options) {
    			return new L.Icon(options);
			};
			
			var locations = [
      			[56.459659, -2.970661],
      			[56.455913, -2.991500],
      			[56.464413, -3.039369],
      			[56.464913, -3.056310],
      			[56.459983, -2.969878], //Crichton Street (C2) bus stop. 
      			[56.478883, -2.952696], //Lamerton Terrace bus stop.
      			[56.493383, -2.935541], // Findowrie Street terminus - (Fintry Road) bus stop
    			];
    			
    		var locationBusStations = [
      			[ 56.4631, -2.966], // Seagate
    			];

			var stopsArray = []
			var stationsArray = []

			for (i = 0; i < locations.length; i++) {  
				
				var stops = L.marker([locations[i][0], locations[i][1]], {icon: stop1}).bindPopup("Bus stop");
				stopsArray[i] = stops
		
      		};
      
      		for (i = 0; i < locationBusStations.length; i++) {  
	
        		var stations = L.marker([locationBusStations[i][0], locationBusStations[i][1]], {icon: stopBusStation}).bindPopup("Bus station");
        		stationsArray[i] = stations
      		};
      		
      		//Hide  BUS STOPS markers when zoomed out
      		var stopMarkers = new L.FeatureGroup();
      		
      		for (i = 0; i < locations.length; i++) {
      		
      			stopMarkers.addLayer(stopsArray[i]);
      		 }
      		
      		map.on('zoomend', function() {
    			if (map.getZoom() < 14){
            		map.removeLayer(stopMarkers);
    				}
    				else {
            		map.addLayer(stopMarkers);
        			}
			});
			
			//Hide  BUS STATIONS markers when zoomed out
			var stationMarkers = new L.FeatureGroup();
      		
      		for (i = 0; i < locationBusStations.length; i++) {
      		
      			stationMarkers.addLayer(stationsArray[i]);
      		 }
      		
      		map.on('zoomend', function() {
    			if (map.getZoom() < 14){
            		map.removeLayer(stationMarkers);
    				}
    				else {
            		map.addLayer(stationMarkers);
        			}
			});
				
			var firstRoute = L.polyline([
			[56.48620328266, -2.84117751382],
			[56.47945450348, -2.87263909733],
            [56.47841215403, -2.88660999888],			
				
			], {
			color: 'red',
			weight: 10,
			opacity: 1,
			smoothFactor: 1
			} ).addTo(map);	
			
			var secondRoute = L.polyline([
			[56.67316772, -3.004418653],
			[56.47738866, -2.931897772],
			[56.48141966, -2.952422347],
			[56.47738866, -2.931897772],
							
			], {
			color: 'red',
			weight: 10,
			opacity: 1,
			smoothFactor: 1
			} ).addTo(map);	
			
			var numberFiveBusRouteOptions =
			{
			'color': 'red',
			'weight': '10',
			'opacity': '1',
			'smoothFactor': '1'
			}
			
			var thirdRoute = L.polyline(numberFiveBusRoute, numberFiveBusRouteOptions).addTo(map);
			
			</script>			
		</div>
	</div>
</body>
</html>